Version 4
SHEET 1 2728 680
WIRE 1264 16 672 16
WIRE 672 48 672 16
WIRE 32 64 0 64
WIRE 256 64 32 64
WIRE 592 64 352 64
WIRE 992 64 720 64
WIRE 592 80 352 80
WIRE 1264 80 1264 16
WIRE 32 96 0 96
WIRE 256 96 32 96
WIRE 592 112 352 112
WIRE 880 112 720 112
WIRE 32 128 0 128
WIRE 256 128 32 128
WIRE 592 128 352 128
WIRE 592 160 352 160
WIRE 768 160 720 160
WIRE 192 176 144 176
WIRE 592 176 352 176
WIRE 768 176 768 160
WIRE 880 176 880 112
WIRE 992 176 992 64
WIRE 144 208 144 176
WIRE 144 208 -80 208
WIRE -80 272 -80 208
WIRE 304 272 304 192
WIRE 768 288 768 256
WIRE 880 288 880 256
WIRE 880 288 768 288
WIRE 992 288 992 256
WIRE 992 288 880 288
WIRE 1184 288 1168 288
WIRE 1264 288 1264 160
WIRE 1264 288 1248 288
WIRE 1168 304 1168 288
WIRE 672 336 672 192
WIRE 1264 336 1264 288
WIRE 1264 336 672 336
FLAG -96 96 0
FLAG 32 64 a
FLAG 32 96 b
FLAG 32 128 c
FLAG 304 352 0
FLAG -80 352 0
FLAG 1168 304 0
SYMBOL 3ph_gen -48 96 R0
WINDOW 0 -95 38 Left 2
SYMATTR InstName Uref
SYMATTR Value sym=1 f=50 amp=0.9 phi=0 Ro=1 N=1
SYMATTR SpiceLine h1=0 h2=0 h3=0 phi1=pi/4 phi2=pi/4 phi3=pi/4
SYMBOL 3lvl_mod 304 112 R0
WINDOW 0 -19 -50 Left 2
SYMATTR InstName U2
SYMATTR SpiceLine2 Vpk=1 f=f dt=1u
SYMBOL 3ph_br_vm 656 128 R0
SYMATTR InstName U3
SYMATTR SpiceLine Ron=10m Roff=1Meg Vfwd=2
SYMBOL cap 1248 272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1n
SYMATTR SpiceLine Rser=1 Rpar=1e6
SYMBOL voltage 304 256 R0
SYMATTR InstName Ven
SYMATTR Value pulse 1 0 {start} 1u 1u {stop-start}
SYMBOL voltage -80 256 R0
WINDOW 3 -36 131 Left 2
SYMATTR Value pulse -1 1 {start+u(f)} {1/12k} {1/12k} 0 {1/6k} {(stop-start)*6k}
SYMATTR InstName Vext
SYMBOL voltage 1264 64 R0
WINDOW 123 24 124 Left 2
SYMATTR Value2 Rser=0.1 Cpar=1m
SYMATTR InstName Vdc
SYMATTR Value 575
SYMBOL ind 976 160 R0
WINDOW 123 36 102 Left 2
SYMATTR InstName L1
SYMATTR Value {L}
SYMATTR Value2 Rser={R}
SYMBOL ind 864 160 R0
WINDOW 123 36 102 Left 2
SYMATTR InstName L2
SYMATTR Value {L}
SYMATTR Value2 Rser={R}
SYMBOL ind 752 160 R0
WINDOW 123 36 102 Left 2
SYMATTR InstName L3
SYMATTR Value {L}
SYMATTR Value2 Rser={R}
TEXT 120 -120 Left 4 ;Three-phase, three-level modulation
TEXT 1024 -128 Left 2 !.tran 50m
TEXT -152 -16 Left 2 ;Three-phase\nsine reference
TEXT -152 440 Left 2 ;External carrier.\nSet f=0 to enable\nit. Then wire it\nto the 3lvl_mod.
TEXT 168 448 Left 2 ;The modulator. Internal\nreference is symmetrical.\nSet f=0 for the external one.
TEXT 560 416 Left 2 ;The power stage. This and the modulator, at its bare simple,\nit could have been done with LTspice's SW, but then there\nwouldn't have been control over start/stop times; even more,\nfor a sudden stop, one of the switches would still be conducting.\nAs it is here, it makes for a fast, modular simulation schematic.
TEXT 1024 -80 Left 2 !.param f=5k start=12.3m stop=44.5m\n+ L=25m R=100
RECTANGLE Normal 128 192 -160 -32 2
RECTANGLE Normal 128 528 -160 224 2
RECTANGLE Normal 528 528 160 -32 2
RECTANGLE Normal 1440 528 544 -32 2
