Version 4
SHEET 1 3012 3460
WIRE -736 -208 -784 -208
WIRE -720 -208 -736 -208
WIRE -576 -208 -656 -208
WIRE -720 -176 -752 -176
WIRE -624 -176 -656 -176
WIRE -352 -176 -352 -208
WIRE 16 -176 -352 -176
WIRE -304 -160 -304 -256
WIRE 16 -160 -304 -160
WIRE 96 -160 80 -160
WIRE -192 -144 -192 -256
WIRE 16 -144 -192 -144
WIRE -736 -128 -736 -208
WIRE -720 -128 -736 -128
WIRE -576 -128 -656 -128
WIRE -112 -128 -112 -208
WIRE 16 -128 -112 -128
WIRE 368 -128 240 -128
WIRE 480 -128 432 -128
WIRE -64 -112 -64 -256
WIRE 16 -112 -64 -112
WIRE 368 -112 352 -112
WIRE 1344 -112 880 -112
WIRE -752 -96 -752 -176
WIRE -752 -96 -816 -96
WIRE -720 -96 -752 -96
WIRE -624 -96 -656 -96
WIRE -432 -96 -432 -256
WIRE 16 -96 -432 -96
WIRE 96 -96 96 -160
WIRE 112 -96 96 -96
WIRE 240 -96 240 -128
WIRE 240 -96 176 -96
WIRE 256 -96 240 -96
WIRE 368 -96 320 -96
WIRE -352 -80 -352 -176
WIRE 16 -80 -352 -80
WIRE 112 -80 80 -80
WIRE -192 -64 -192 -144
WIRE 16 -64 -192 -64
WIRE 112 -64 96 -64
WIRE 240 -64 176 -64
WIRE 336 -64 320 -64
WIRE 880 -64 880 -112
WIRE -112 -48 -112 -128
WIRE 16 -48 -112 -48
WIRE 336 -48 336 -64
WIRE 368 -48 336 -48
WIRE 480 -48 432 -48
WIRE 800 -48 704 -48
WIRE 1120 -48 928 -48
WIRE -736 -32 -784 -32
WIRE -720 -32 -736 -32
WIRE -576 -32 -656 -32
WIRE -48 -32 -48 -208
WIRE 16 -32 -48 -32
WIRE 352 -32 352 -112
WIRE 368 -32 352 -32
WIRE 800 -32 736 -32
WIRE -432 -16 -432 -96
WIRE 16 -16 -432 -16
WIRE 240 -16 240 -64
WIRE 368 -16 240 -16
WIRE 1344 -16 1344 -112
WIRE -720 0 -752 0
WIRE -624 0 -656 0
WIRE -288 0 -288 -208
WIRE 16 0 -288 0
WIRE 96 0 96 -64
WIRE 96 0 80 0
WIRE 800 0 704 0
WIRE 1088 0 928 0
WIRE -192 16 -192 -64
WIRE 16 16 -192 16
WIRE 800 16 736 16
WIRE -128 32 -128 -256
WIRE 16 32 -128 32
WIRE -736 48 -736 -32
WIRE -720 48 -736 48
WIRE -576 48 -656 48
WIRE -48 48 -48 -32
WIRE 16 48 -48 48
WIRE 800 48 704 48
WIRE 1056 48 928 48
WIRE 800 64 736 64
WIRE 1056 64 1056 48
WIRE 1088 64 1088 0
WIRE 1120 64 1120 -48
WIRE -752 80 -752 0
WIRE -752 80 -816 80
WIRE -720 80 -752 80
WIRE -624 80 -656 80
WIRE -368 128 -368 -256
WIRE 16 128 -368 128
WIRE -736 144 -784 144
WIRE -720 144 -736 144
WIRE -576 144 -656 144
WIRE -288 144 -288 0
WIRE 16 144 -288 144
WIRE 96 144 80 144
WIRE -176 160 -176 -208
WIRE 16 160 -176 160
WIRE 1056 160 1056 128
WIRE 1056 160 976 160
WIRE 1120 160 1120 128
WIRE 1200 160 1120 160
WIRE -720 176 -752 176
WIRE -624 176 -656 176
WIRE -128 176 -128 32
WIRE 16 176 -128 176
WIRE 368 176 240 176
WIRE 480 176 432 176
WIRE -48 192 -48 48
WIRE 16 192 -48 192
WIRE 352 192 352 -32
WIRE 368 192 352 192
WIRE -416 208 -416 -208
WIRE 16 208 -416 208
WIRE 96 208 96 144
WIRE 112 208 96 208
WIRE 240 208 240 176
WIRE 240 208 176 208
WIRE 256 208 240 208
WIRE 368 208 320 208
WIRE 880 208 880 80
WIRE 1344 208 1344 64
WIRE 1344 208 880 208
WIRE -736 224 -736 144
WIRE -720 224 -736 224
WIRE -576 224 -656 224
WIRE -368 224 -368 128
WIRE 16 224 -368 224
WIRE 112 224 80 224
WIRE 1344 224 1344 208
WIRE -176 240 -176 160
WIRE 16 240 -176 240
WIRE 112 240 96 240
WIRE 240 240 176 240
WIRE 336 240 320 240
WIRE -752 256 -752 176
WIRE -752 256 -816 256
WIRE -720 256 -752 256
WIRE -624 256 -656 256
WIRE -128 256 -128 176
WIRE 16 256 -128 256
WIRE 336 256 336 240
WIRE 368 256 336 256
WIRE 480 256 432 256
WIRE 976 256 976 160
WIRE 1088 256 1088 128
WIRE 1200 256 1200 160
WIRE -64 272 -64 -112
WIRE 16 272 -64 272
WIRE 352 272 352 192
WIRE 368 272 352 272
WIRE 960 272 928 272
WIRE 1072 272 1040 272
WIRE 1184 272 1152 272
WIRE -432 288 -432 -16
WIRE 16 288 -432 288
WIRE 240 288 240 240
WIRE 368 288 240 288
WIRE -288 304 -288 144
WIRE 16 304 -288 304
WIRE 96 304 96 240
WIRE 96 304 80 304
WIRE 1344 304 1344 288
WIRE 1360 304 1344 304
WIRE -192 320 -192 16
WIRE 16 320 -192 320
WIRE 1344 320 1344 304
WIRE -128 336 -128 256
WIRE 16 336 -128 336
WIRE -48 352 -48 192
WIRE 16 352 -48 352
WIRE 976 400 976 320
WIRE 1088 400 1088 320
WIRE 1088 400 976 400
WIRE 1200 400 1200 320
WIRE 1200 400 1088 400
WIRE 1344 400 1344 384
WIRE 1344 400 1200 400
WIRE -416 432 -416 208
WIRE 16 432 -416 432
WIRE -304 448 -304 -160
WIRE 16 448 -304 448
WIRE 96 448 80 448
WIRE -176 464 -176 240
WIRE 16 464 -176 464
WIRE -112 480 -112 -48
WIRE 16 480 -112 480
WIRE 368 480 240 480
WIRE 480 480 432 480
WIRE -64 496 -64 272
WIRE 16 496 -64 496
WIRE 352 496 352 272
WIRE 368 496 352 496
WIRE -352 512 -352 -80
WIRE 16 512 -352 512
WIRE 96 512 96 448
WIRE 112 512 96 512
WIRE 240 512 240 480
WIRE 240 512 176 512
WIRE 256 512 240 512
WIRE 368 512 320 512
WIRE -304 528 -304 448
WIRE 16 528 -304 528
WIRE 112 528 80 528
WIRE -192 544 -192 320
WIRE 16 544 -192 544
WIRE 112 544 96 544
WIRE 240 544 176 544
WIRE 336 544 320 544
WIRE -112 560 -112 480
WIRE 16 560 -112 560
WIRE 336 560 336 544
WIRE 368 560 336 560
WIRE 480 560 432 560
WIRE -64 576 -64 496
WIRE 16 576 -64 576
WIRE 352 576 352 496
WIRE 368 576 352 576
WIRE -416 592 -416 432
WIRE 16 592 -416 592
WIRE 240 592 240 544
WIRE 368 592 240 592
WIRE -688 608 -752 608
WIRE -368 608 -368 224
WIRE 16 608 -368 608
WIRE 96 608 96 544
WIRE 96 608 80 608
WIRE -176 624 -176 464
WIRE 16 624 -176 624
WIRE -688 640 -752 640
WIRE -128 640 -128 336
WIRE 16 640 -128 640
WIRE -64 656 -64 576
WIRE 16 656 -64 656
WIRE -688 672 -752 672
WIRE 352 704 352 576
WIRE -800 752 -800 688
FLAG 480 -128 Sa
FLAG 480 -48 _Sa
FLAG 480 176 Sb
FLAG 480 256 _Sb
FLAG 480 480 Sc
FLAG 480 560 _Sc
FLAG 960 304 0
FLAG 1072 304 0
FLAG 1184 304 0
FLAG 1360 304 0
FLAG 704 -48 Sa
FLAG 736 -32 _Sa
FLAG 704 0 Sb
FLAG 736 16 _Sb
FLAG 704 48 Sc
FLAG 736 64 _Sc
FLAG -576 -128 o1
FLAG -576 48 o2
FLAG -576 224 o3
FLAG -848 640 0
FLAG -800 832 0
FLAG -576 144 i3
FLAG -576 -32 i2
FLAG -576 -208 i1
FLAG -432 -256 o1
FLAG -368 -256 o2
FLAG -64 -256 i3
FLAG -128 -256 i2
FLAG -192 -256 i1
FLAG -304 -256 o3
FLAG -816 -96 ia
FLAG 1152 272 ia
FLAG 1040 272 ib
FLAG 928 272 ic
FLAG -816 80 ib
FLAG -816 256 ic
FLAG -688 608 ia*
FLAG -688 640 ib*
FLAG -688 672 ic*
FLAG -784 -208 ia*
FLAG -784 -32 ib*
FLAG -784 144 ic*
FLAG 352 784 0
FLAG -416 -208 _o1
FLAG -352 -208 _o2
FLAG -48 -208 _i3
FLAG -112 -208 _i2
FLAG -176 -208 _i1
FLAG -288 -208 _o3
FLAG -624 -96 _o1
FLAG -624 -176 _i1
FLAG -624 80 _o2
FLAG -624 176 _i3
FLAG -624 0 _i2
FLAG -624 256 _o3
SYMBOL Digital\\and 288 -144 R0
WINDOW 0 -27 63 Left 2
SYMATTR InstName A34
SYMATTR SpiceLine td={dt} vhigh={vhigh} vlow={vlow}
SYMBOL cap 1328 224 R0
SYMATTR InstName C1
SYMATTR Value 1n
SYMATTR SpiceLine Rser=1 Rpar=1e6
SYMBOL Digital\\diffschmitt -720 -176 R0
WINDOW 0 33 31 Left 2
SYMATTR InstName Ao1
SYMATTR SpiceLine2 vh={ho}
SYMATTR SpiceLine ref=0 td={td} vhigh={vhigh} vlow={vlow}
SYMBOL Digital\\diffschmitt -720 -256 R0
WINDOW 0 22 27 Left 2
SYMATTR InstName Ai1
SYMATTR SpiceLine2 vh={hi}
SYMATTR SpiceLine ref=0 td={td} vhigh={vhigh} vlow={vlow}
SYMBOL voltage -800 736 R0
WINDOW 0 23 103 Left 2
WINDOW 3 23 131 Left 2
WINDOW 123 23 159 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value pulse 42.5 21.25 25m 10u rser=1 cpar=10u
SYMBOL Digital\\or 144 -144 R0
WINDOW 0 -19 60 Left 2
SYMATTR InstName A16
SYMATTR SpiceLine vhigh={vhigh} vlow={vlow}
SYMBOL voltage 352 688 R0
WINDOW 0 43 71 Left 2
WINDOW 3 43 99 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value PULSE({vlow} {vhigh} {start} {td} {td} {stop-start} 1k)
SYMBOL Digital\\and 48 -208 R0
WINDOW 0 -20 72 Left 2
SYMATTR InstName A3
SYMATTR SpiceLine vhigh={vhigh} vlow={vlow}
SYMBOL 3ph_br_vm 864 16 R0
SYMATTR SpiceLine Ron=100m Roff=10Meg Vfwd=0.5
SYMATTR InstName U3
SYMATTR SpiceLine2 Rs=10meg Cs=1n
SYMBOL Isense 976 288 R90
SYMATTR InstName U1
SYMBOL Isense 1088 288 R90
SYMATTR InstName U2
SYMBOL Isense 1200 288 R90
SYMATTR InstName U4
SYMBOL 3ph_gen -800 640 R0
SYMATTR InstName U6
SYMATTR Value sym=1 f=50 amp=0 phi=pi/4 Ro=1 N=1
SYMATTR SpiceLine2 a=1 b=0 c=0 d=0 e=0 p=1 q=0 xp=1
SYMBOL Digital\\diffschmitt -720 0 R0
WINDOW 0 33 31 Left 2
SYMATTR InstName Ao2
SYMATTR SpiceLine2 vh={ho}
SYMATTR SpiceLine ref=0 td={td} vhigh={vhigh} vlow={vlow}
SYMBOL Digital\\diffschmitt -720 -80 R0
WINDOW 0 22 27 Left 2
SYMATTR InstName Ai2
SYMATTR SpiceLine2 vh={hi}
SYMATTR SpiceLine ref=0 td={td} vhigh={vhigh} vlow={vlow}
SYMBOL Digital\\diffschmitt -720 176 R0
WINDOW 0 33 31 Left 2
SYMATTR InstName Ao3
SYMATTR SpiceLine2 vh={ho}
SYMATTR SpiceLine ref=0 td={td} vhigh={vhigh} vlow={vlow}
SYMBOL Digital\\diffschmitt -720 96 R0
WINDOW 0 22 27 Left 2
SYMATTR InstName Ai3
SYMATTR SpiceLine2 vh={hi}
SYMATTR SpiceLine ref=0 td={td} vhigh={vhigh} vlow={vlow}
SYMBOL Digital\\and 48 -128 R0
WINDOW 0 -20 72 Left 2
SYMATTR InstName A1
SYMATTR SpiceLine vhigh={vhigh} vlow={vlow}
SYMBOL Digital\\and 48 -48 R0
WINDOW 0 -20 72 Left 2
SYMATTR InstName A2
SYMATTR SpiceLine vhigh={vhigh} vlow={vlow}
SYMBOL Digital\\and 48 96 R0
WINDOW 0 -20 72 Left 2
SYMATTR InstName A4
SYMATTR SpiceLine vhigh={vhigh} vlow={vlow}
SYMBOL Digital\\and 48 176 R0
WINDOW 0 -20 72 Left 2
SYMATTR InstName A5
SYMATTR SpiceLine vhigh={vhigh} vlow={vlow}
SYMBOL Digital\\and 48 256 R0
WINDOW 0 -20 72 Left 2
SYMATTR InstName A6
SYMATTR SpiceLine vhigh={vhigh} vlow={vlow}
SYMBOL Digital\\and 48 400 R0
WINDOW 0 -20 72 Left 2
SYMATTR InstName A7
SYMATTR SpiceLine vhigh={vhigh} vlow={vlow}
SYMBOL Digital\\and 48 480 R0
WINDOW 0 -20 72 Left 2
SYMATTR InstName A8
SYMATTR SpiceLine vhigh={vhigh} vlow={vlow}
SYMBOL Digital\\and 48 560 R0
WINDOW 0 -20 72 Left 2
SYMATTR InstName A9
SYMATTR SpiceLine vhigh={vhigh} vlow={vlow}
SYMBOL Digital\\or 144 160 R0
WINDOW 0 -19 60 Left 2
SYMATTR InstName A10
SYMATTR SpiceLine vhigh={vhigh} vlow={vlow}
SYMBOL Digital\\or 144 464 R0
WINDOW 0 -19 60 Left 2
SYMATTR InstName A11
SYMATTR SpiceLine vhigh={vhigh} vlow={vlow}
SYMBOL Digital\\and 288 160 R0
WINDOW 0 -27 63 Left 2
SYMATTR InstName A12
SYMATTR SpiceLine td={dt} vhigh={vhigh} vlow={vlow}
SYMBOL Digital\\and 288 464 R0
WINDOW 0 -27 63 Left 2
SYMATTR InstName A14
SYMATTR SpiceLine td={dt} vhigh={vhigh} vlow={vlow}
SYMBOL Digital\\and 400 -176 R0
WINDOW 0 -20 72 Left 2
SYMATTR InstName A13
SYMATTR SpiceLine vhigh={vhigh} vlow={vlow}
SYMBOL Digital\\and 400 -96 R0
WINDOW 0 -20 72 Left 2
SYMATTR InstName A15
SYMATTR SpiceLine vhigh={vhigh} vlow={vlow}
SYMBOL Digital\\and 400 128 R0
WINDOW 0 -20 72 Left 2
SYMATTR InstName A17
SYMATTR SpiceLine vhigh={vhigh} vlow={vlow}
SYMBOL Digital\\and 400 208 R0
WINDOW 0 -20 72 Left 2
SYMATTR InstName A18
SYMATTR SpiceLine vhigh={vhigh} vlow={vlow}
SYMBOL Digital\\and 400 432 R0
WINDOW 0 -20 72 Left 2
SYMATTR InstName A19
SYMATTR SpiceLine vhigh={vhigh} vlow={vlow}
SYMBOL Digital\\and 400 512 R0
WINDOW 0 -20 72 Left 2
SYMATTR InstName A20
SYMATTR SpiceLine vhigh={vhigh} vlow={vlow}
SYMBOL voltage 1344 -32 R0
WINDOW 0 30 31 Left 2
WINDOW 3 31 94 Left 2
WINDOW 123 23 159 Left 2
WINDOW 39 31 122 Left 2
SYMATTR InstName V3
SYMATTR Value 565
SYMATTR SpiceLine Rser=0.1 Cpar=1m
SYMBOL cap 1328 320 R0
SYMATTR InstName C2
SYMATTR Value 1n
SYMATTR SpiceLine Rser=1 Rpar=1e6
SYMBOL 3ph_LC 1088 96 R90
WINDOW 0 16 -58 VLeft 2
WINDOW 39 46 -44 VLeft 2
SYMATTR InstName U5
SYMATTR SpiceLine L=10m C=1n RLser=5 RLpar=10k
SYMATTR SpiceLine2 null=0 k=0
TEXT 656 1016 Left 2 !.param vhigh=1.01 vlow=0.01\n.param hi=500m ho=1000m\n.param start=0 stop=1k\n.param dt=1u\n+ td=1000n
TEXT 656 968 Left 2 !.tran 50m
TEXT -496 696 Left 2 ;The vectors are implemented using a simple approach: for the\nsteady-state, it needs to have low switching frequency and when\nthe outer band is "touched", the current error needs to return\nquickly in the inner band's perimeter.\nFor example when the outer and the inner band are in sector I\nwith the space-vector V1 -- 1 0 0 --, the output is V1 and when the\nouter band is V1 and the inner band goes to V2, the output follows\nthe inner one; zero for the rest to minimize the number of switchings.\n \nHere's the table for the first sector:\n(for better viewing use Control Panel > Drafting Options >\nFont Properties > Courier but don't click apply, click "Cancel"\nafter viewing)\n \nO1 O2 O3 | I1 I2 I3 | S1 S2 S3\n-------------------------------\n1  0  0  | 1  0  0  | 1  0  0\n         | 1  1  0  | 1  1  0\n         | x  x  x  | 0  0  0\n-------------------------------\nThe "PAL" has been implemented\nwith the freeware LogiSim, then\nhand-tweaked.
TEXT -864 1232 Left 2 ;The current references with a\n42.5A amplitude to match the\none in PC_SVPWM.
TEXT -864 408 Left 2 ;The hysteresis comparators,\neach pair having the inner\nband in the upper side and\nthe outer band below.
TEXT 1000 1016 Left 2 ;Vhigh/Vlow = logic output levels (+0.01 here for better display)\nhi/ho = inner/outer hysteresis bands\nstart/stop = the times when outputs are enabled/disabled\ndt = dead-time\ntd = delay time per logic gate
TEXT 624 648 Left 2 ;The switching bridge with an inductive load, similar to a motor; the voltage source\nmimics the back EMF.\nPlot I(L1) , I(L2) , I(L3) to see the results and compare them with the ones in\nPC_SVPWM.asc.
TEXT 216 1256 Left 2 ;Dead-time control plus\na programmable start/stop.
TEXT -160 -456 Center 5 ;Space-Vector Hysteresis Current Control
TEXT -184 -400 Center 2 ;(a simple version out of many, for simplicity and speed)
TEXT 704 264 Left 2 ;k l1 l2 l3 0.9
RECTANGLE Normal -520 1344 -880 528 2
RECTANGLE Normal -520 520 -880 -304 2
RECTANGLE Normal 200 1344 -512 -304 2
RECTANGLE Normal 600 1344 208 -304 2
RECTANGLE Normal 1560 760 608 -304 2
