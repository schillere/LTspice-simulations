Version 4
SHEET 1 2572 788
WIRE 144 96 96 96
WIRE 192 96 144 96
WIRE 336 96 304 96
WIRE 352 96 336 96
WIRE 640 96 624 96
WIRE 800 96 752 96
WIRE 144 128 96 128
WIRE 192 128 144 128
WIRE 336 128 304 128
WIRE 416 128 336 128
WIRE 640 128 528 128
WIRE 800 128 752 128
WIRE 144 160 96 160
WIRE 192 160 144 160
WIRE 336 160 304 160
WIRE 352 160 336 160
WIRE 624 160 624 96
WIRE 640 160 624 160
WIRE 800 160 752 160
WIRE 624 192 624 160
WIRE 224 208 224 176
WIRE 224 208 176 208
WIRE 336 208 224 208
WIRE 672 208 672 176
WIRE 672 208 336 208
WIRE 1312 240 1264 240
WIRE 1312 272 1264 272
WIRE 1312 304 1264 304
WIRE 240 336 176 336
WIRE 352 336 320 336
WIRE 496 336 432 336
WIRE 528 336 496 336
WIRE 688 336 640 336
WIRE 704 336 688 336
WIRE 864 336 784 336
WIRE 1024 336 976 336
WIRE 32 352 -16 352
WIRE 176 352 176 336
WIRE 176 352 144 352
WIRE 272 368 208 368
WIRE 736 368 656 368
WIRE 864 368 816 368
WIRE 1024 368 976 368
WIRE 32 384 -16 384
WIRE 176 384 144 384
WIRE 176 400 176 384
WIRE 240 400 176 400
WIRE 384 400 384 368
WIRE 384 400 320 400
WIRE 688 400 688 336
WIRE 704 400 688 400
WIRE 816 400 816 368
WIRE 816 400 784 400
WIRE 1024 400 976 400
WIRE 32 416 -16 416
WIRE 208 464 208 368
WIRE 656 464 656 368
WIRE 656 464 208 464
WIRE 272 480 272 432
WIRE 736 480 736 432
WIRE 736 480 272 480
WIRE 208 512 208 464
WIRE 208 512 160 512
WIRE 192 576 160 576
WIRE 272 576 272 480
WIRE 272 576 240 576
FLAG 0 128 0
FLAG 1168 272 0
FLAG 144 128 b
FLAG 144 160 c
FLAG 800 96 a*
FLAG 800 128 b*
FLAG 800 160 c*
FLAG 1312 240 a~
FLAG 1312 272 b~
FLAG 1312 304 c~
FLAG 336 128 q
FLAG 336 96 d
FLAG 336 160 z
FLAG -16 352 a
FLAG -16 384 b
FLAG -16 416 c
FLAG 496 336 p
FLAG 864 400 0
FLAG 1024 336 _a
FLAG 1024 368 _b
FLAG 1024 400 _c
FLAG 144 96 a
FLAG 416 160 0
FLAG 528 368 0
FLAG 624 192 0
FLAG 336 208 wt
SYMBOL 3ph_gen 48 128 R0
SYMATTR InstName U1
SYMATTR SpiceLine h1=0 h2=0 h3=0 phi1=pi/4 phi2=-pi/8 phi3=0
SYMATTR SpiceLine2 a=1 b=2/5 c=pi/5 d=1/5 e=pi/7 p=1 q=0 xp=1 xq=1
SYMATTR Value2 dc1=1 dc2=0 dc3=-0.5 A1=1 A2=1.1 A3=0.666
SYMATTR Value sym=0 f=f amp=1 phi=0 Ro=1 N=17
SYMBOL wt 160 208 R0
SYMATTR InstName U4
SYMATTR SpiceLine f=f  phi=0
SYMBOL Filter 592 336 R0
SYMATTR SpiceModel RRS
SYMATTR SpiceLine f0=3200 fp1=1k fs1=2k fp2=0 fs2=0
SYMATTR InstName U9
SYMATTR SpiceLine2 G=1 Asc=3 Ap=1 As=40 N=64
SYMATTR Value2 Win=0 Choice=1 sim=1 test=0 SH=1 Fact=1
SYMBOL Transforms 240 128 R0
SYMATTR SpiceModel abc/dq0
SYMATTR InstName U2
SYMBOL Transforms 688 128 R0
SYMATTR SpiceModel dq0/abc
SYMATTR InstName U3
SYMBOL Transforms 80 384 R0
SYMATTR InstName U6
SYMBOL Transforms 912 368 R0
SYMATTR SpiceModel AB0/abc
SYMATTR InstName U7
SYMBOL Math2r 272 336 R0
SYMATTR SpiceModel x
SYMATTR InstName U10
SYMBOL Math2r 384 336 R0
SYMATTR SpiceModel +
SYMATTR InstName U11
SYMBOL Math2r 272 400 R0
SYMATTR SpiceModel x
SYMATTR InstName U12
SYMBOL Math2r 736 336 R0
SYMATTR SpiceModel x
SYMATTR InstName U13
SYMBOL Math2r 736 400 R0
SYMATTR SpiceModel x
SYMATTR InstName U14
SYMBOL SpecialFunctions\\modulate2 16 512 R0
WINDOW 0 -6 115 Left 2
SYMATTR InstName APLL
SYMATTR SpiceLine mark={f} space=0
SYMBOL Gain 208 576 R0
SYMATTR InstName U15
SYMBOL Filter 480 128 R0
SYMATTR SpiceModel RRS
SYMATTR SpiceLine f0=3200 fp1=1k fs1=2k fp2=0 fs2=0
SYMATTR InstName U8
SYMATTR SpiceLine2 G=1 Asc=3 Ap=1 As=40 N=64
SYMATTR Value2 Win=0 Choice=1 sim=1 test=0 SH=1 Fact=1
SYMBOL 3ph_gen 1216 272 R0
SYMATTR InstName U5
SYMATTR SpiceLine2 a=1 b=2/5 c=pi/5 d=1/5 e=pi/7 p=1 q=0 xp=1 xq=1
SYMATTR Value sym=1 f=f amp=1 phi=0 Ro=1 N=1
TEXT 1160 136 Left 2 !.tran 0 100m 0 37.9u uic
TEXT 1160 72 Left 2 !.four {f} 25 4 v(a)\n.four {f} 25 4 v(a*)
TEXT 256 -192 Left 4 ;Positive sequence detectors
TEXT 280 -104 Left 2 ;Dq (above) and pq (below), the pq being\nthe expanded version of the dq, which has\na sign inversion due to the internal matrix\nwith cos/-sin.\na~, b~, c~ are the references to compare to.
TEXT 1160 32 Left 2 !.param  f=50
TEXT 1160 168 Left 2 !.opt plotwinsize=0
TEXT 376 232 Left 2 ;* Uncomment this if not using UIC\n.ic v(q)=0 v(p)=0
LINE Normal 1072 272 -32 272 2
