Version 4
SHEET 1 4612 2004
WIRE 1584 -528 1488 -528
WIRE 1488 -480 1488 -528
WIRE 1584 -480 1488 -480
WIRE 1856 -480 1696 -480
WIRE 2000 -480 1936 -480
WIRE 2160 -480 2112 -480
WIRE 2368 -480 2304 -480
WIRE 1488 -448 1488 -480
WIRE 2000 -448 2000 -480
WIRE 2272 -416 2272 -448
WIRE 2272 -416 2192 -416
WIRE 2272 -400 2272 -416
WIRE 2512 -384 2512 -464
WIRE 2608 -384 2512 -384
WIRE 2640 -384 2608 -384
WIRE 2832 -384 2784 -384
WIRE 3008 -384 2976 -384
WIRE 3216 -384 3152 -384
WIRE 3424 -384 3216 -384
WIRE 2608 -352 2608 -384
WIRE 1488 -320 1488 -368
WIRE 1584 -320 1488 -320
WIRE 1856 -320 1680 -320
WIRE 2000 -320 2000 -368
WIRE 2000 -320 1936 -320
WIRE 2944 -320 2944 -352
WIRE 2944 -320 2864 -320
WIRE 2944 -304 2944 -320
WIRE 3216 -272 3216 -384
WIRE 3264 -272 3216 -272
WIRE 3456 -272 3408 -272
WIRE 1488 -256 1488 -320
WIRE 1872 -240 1872 -272
WIRE 2608 -240 2608 -272
WIRE 2720 -240 2720 -320
WIRE 2720 -240 2608 -240
WIRE 1824 -208 1680 -208
WIRE 1920 -208 1920 -272
WIRE 1920 -208 1824 -208
WIRE 2112 -208 2112 -480
WIRE 2112 -208 1920 -208
WIRE 2368 -208 2368 -480
WIRE 3088 -208 3088 -320
WIRE 3376 -208 3376 -240
WIRE 3376 -208 3296 -208
WIRE 3376 -192 3376 -208
WIRE 1952 -144 1888 -144
WIRE 2032 -144 1952 -144
WIRE 2288 -144 2176 -144
WIRE 2512 -144 2512 -384
WIRE 2512 -144 2432 -144
WIRE 1888 -96 1888 -144
WIRE 2720 -96 2720 -240
WIRE 2816 -96 2720 -96
WIRE 3088 -80 3088 -128
WIRE 2720 -32 2720 -96
WIRE 1888 32 1888 -16
WIRE 1824 96 1824 -208
WIRE 1920 96 1824 96
WIRE 2112 96 2112 -80
WIRE 2112 96 2080 96
WIRE 2720 96 2720 48
WIRE 1872 272 1792 272
WIRE 2032 272 1952 272
WIRE 2112 272 2032 272
WIRE 2416 272 2352 272
WIRE 1792 320 1792 272
WIRE 2032 336 2032 272
WIRE 2352 336 2352 272
WIRE 1792 464 1792 400
WIRE 2032 464 2032 400
WIRE 2352 464 2352 416
FLAG 1792 464 0
FLAG 2032 464 0
FLAG 2112 272 El_Power
FLAG 1696 -480 M+
FLAG 1680 -320 M-
FLAG 1888 32 0
FLAG 2512 -464 Torque
FLAG 1680 -208 Wmech
FLAG 1488 -256 0
FLAG 1584 -480 M+
FLAG 1584 -320 M-
FLAG 1584 -528 PWR
FLAG 3424 -384 Wmech
FLAG 3088 -80 0
FLAG 2720 96 0
FLAG 2416 272 Shaft_Power
FLAG 2352 464 0
FLAG 2816 -96 Load
FLAG 3456 -272 RPM
FLAG 2944 -304 0
FLAG 2272 -400 0
FLAG 3376 -192 0
FLAG 1872 -240 0
FLAG 1952 -144 Tem
SYMBOL voltage 1488 -464 R0
WINDOW 0 -42 6 Left 2
WINDOW 3 -44 93 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value 24
SYMBOL bv 1792 304 R0
SYMATTR InstName B1
SYMATTR Value V=-v(PWR)*i(V6)
SYMBOL res 1968 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 5k
SYMBOL cap 2016 336 R0
SYMATTR InstName C3
SYMATTR Value 0.047µF
SYMBOL res 1984 -464 R0
SYMATTR InstName R15
SYMATTR Value {Rt}
SYMBOL ind 1840 -464 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value {L}
SYMBOL bv 1888 -112 R0
WINDOW 3 44 57 Left 2
SYMATTR Value V=I(L2)*Kt
SYMATTR InstName B2
SYMBOL e 1952 -320 M270
SYMATTR InstName E5
SYMATTR Value {Kemf}
SYMBOL Subtractor 2112 -144 R0
SYMATTR InstName X3
SYMBOL Subtractor 2368 -144 M180
SYMATTR InstName X4
SYMBOL Subtractor 2720 -384 R0
SYMATTR InstName X1
SYMBOL Integrator 3088 -384 R0
SYMATTR InstName X2
SYMBOL voltage 2720 -48 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value PWL(0 0 0.249999 0 0.25 0.8)
SYMBOL voltage 3088 -224 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value 0
SYMBOL bv 2352 320 R0
SYMATTR InstName B3
SYMATTR Value V = V(Torque) * V(Wmech)
SYMBOL Clamp1 2000 96 R0
WINDOW 39 -93 83 Left 2
SYMATTR SpiceLine max={Kf}, min={-Kf}
SYMATTR InstName X5
SYMBOL Gain 2208 -512 R0
WINDOW 3 -15 32 Left 2
SYMATTR Value {Kd}
SYMATTR InstName E3
SYMBOL Gain 2880 -416 R0
WINDOW 3 -82 -41 Left 2
SYMATTR Value {1/(Jmotor + Jload)}
SYMATTR InstName E4
SYMBOL Gain 3312 -304 R0
WINDOW 3 -28 32 Left 2
SYMATTR Value {30 / pi}
SYMATTR InstName E1
SYMBOL res 2592 -368 R0
SYMATTR InstName R1
SYMATTR Value 1K
TEXT 3216 -552 Left 2 !.tran 0 0.5 0 uic
TEXT 3216 -592 Left 2 ;DC MOTOR MODEL
TEXT 1768 -576 Left 2 ;Motor Model (Pittman DC Servo Motor\nModel 14206 with 24V Winding)
TEXT 2120 56 Left 2 ;Friction\nMotor Bearings and Brushes
TEXT 2392 -440 VRight 2 ;Damping Losses
TEXT 2728 472 Left 2 !.param Jload = 100E-6
TEXT 2576 -584 Left 2 ;LOAD
TEXT 3376 -352 Left 2 ;Radians/sec
TEXT 2888 -120 Left 2 ;load\ntorque
TEXT 2576 144 Left 2 ;To put motor on a dyno, cut trace to "lock rotor"\nand then use V4 to specify dyno speed (radians/sec).
TEXT 2728 248 Left 2 !.param Kt = 0.071
TEXT 2728 440 Left 2 !.param Jmotor = 37E-6
TEXT 2728 280 Left 2 !.param Kemf = 0.071
TEXT 3000 248 Left 2 ;Newton-Meters/Amp
TEXT 3000 280 Left 2 ;Volts/(radian/sec)
TEXT 2728 312 Left 2 !.param Kf = 0.014
TEXT 3000 312 Left 2 ;Newton-Meters
TEXT 2728 344 Left 2 !.param Kd = 13E-6
TEXT 3000 344 Left 2 ;Newton-Meters/(radian/sec)
TEXT 2728 376 Left 2 !.param Rt = 0.84
TEXT 2728 408 Left 2 !.param L = 1.36E-3
TEXT 3000 440 Left 2 ;Kilograms-Meter^2
TEXT 3000 408 Left 2 ;Henries
TEXT 3000 376 Left 2 ;Ohms
TEXT 3000 472 Left 2 ;Kilograms-Meter^2
TEXT 3216 -528 Left 2 !.options method = gear
TEXT 1512 496 Left 2 ;D A V E    W I L S O N\nK A P P A   E L E C T R O N I C S   L L C\ndave@kappaiq.com\nwww.kappaiq.com
TEXT 2736 -176 Left 2 ;Cut here to lock rotor
TEXT 2712 -176 Left 2 ;X
RECTANGLE Normal 2464 208 1752 -608
RECTANGLE Normal 3176 208 2568 -608
