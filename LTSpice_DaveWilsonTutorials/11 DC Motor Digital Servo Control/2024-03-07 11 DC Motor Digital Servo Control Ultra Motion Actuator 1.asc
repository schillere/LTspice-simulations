Version 4
SHEET 1 4612 4392
WIRE -3264 832 -3312 832
WIRE -2864 832 -3120 832
WIRE -2432 832 -2704 832
WIRE -2000 864 -2608 864
WIRE -400 864 -848 864
WIRE -848 912 -848 864
WIRE -3184 928 -3184 896
WIRE -3184 928 -3328 928
WIRE -2432 928 -2432 832
WIRE -2608 944 -2608 864
WIRE -1104 976 -1136 976
WIRE -928 976 -960 976
WIRE -736 976 -784 976
WIRE -592 976 -736 976
WIRE -400 976 -400 864
WIRE -400 976 -432 976
WIRE -3040 1008 -3120 1008
WIRE -2688 1008 -2896 1008
WIRE -2512 1008 -2544 1008
WIRE -2320 1008 -2352 1008
WIRE -2224 1008 -2320 1008
WIRE -2000 1008 -2000 864
WIRE -2000 1008 -2064 1008
WIRE -592 1008 -672 1008
WIRE -1584 1024 -1792 1024
WIRE -1248 1024 -1392 1024
WIRE -2224 1040 -2256 1040
WIRE -992 1040 -992 1008
WIRE -992 1040 -1072 1040
WIRE -992 1056 -992 1040
WIRE -2928 1072 -2928 1040
WIRE -2928 1072 -3008 1072
WIRE -2928 1088 -2928 1072
WIRE -1456 1136 -1456 1104
WIRE -2128 1184 -2208 1184
WIRE -2816 1200 -2896 1200
WIRE -2640 1200 -2672 1200
WIRE -2432 1200 -2432 1088
WIRE -2432 1200 -2480 1200
WIRE -2128 1232 -2128 1184
WIRE -1456 1248 -1456 1216
WIRE -4512 1264 -4560 1264
WIRE -3120 1264 -3120 1008
WIRE -3072 1264 -3120 1264
WIRE -2208 1264 -2208 1184
WIRE -1136 1264 -1136 976
WIRE -1072 1264 -1136 1264
WIRE -2128 1360 -2128 1312
WIRE -2080 1360 -2128 1360
WIRE -1440 1360 -1632 1360
WIRE -1248 1360 -1248 1024
WIRE -1248 1360 -1440 1360
WIRE -2128 1424 -2128 1360
WIRE -2320 1440 -2320 1008
WIRE -1632 1440 -1632 1360
WIRE -736 1440 -736 976
WIRE -5248 1504 -5376 1504
WIRE -5088 1504 -5248 1504
WIRE -4896 1504 -4944 1504
WIRE -4560 1504 -4560 1264
WIRE -4560 1504 -4608 1504
WIRE -4480 1504 -4560 1504
WIRE -4288 1504 -4336 1504
WIRE -3840 1504 -4128 1504
WIRE -3648 1504 -3840 1504
WIRE -3456 1504 -3504 1504
WIRE -3120 1504 -3120 1264
WIRE -3120 1504 -3168 1504
WIRE -3040 1504 -3120 1504
WIRE -2736 1504 -2736 1264
WIRE -2736 1504 -2896 1504
WIRE -2560 1504 -2736 1504
WIRE -2400 1504 -2560 1504
WIRE -2208 1504 -2256 1504
WIRE -1840 1504 -2048 1504
WIRE -1712 1504 -1840 1504
WIRE -1472 1504 -1568 1504
WIRE -1136 1504 -1136 1264
WIRE -1136 1504 -1184 1504
WIRE -1104 1504 -1136 1504
WIRE -816 1504 -960 1504
WIRE -640 1504 -672 1504
WIRE -240 1504 -480 1504
WIRE -5376 1536 -5376 1504
WIRE -4896 1552 -4928 1552
WIRE -3456 1552 -3488 1552
WIRE -1472 1552 -1536 1552
WIRE -4368 1568 -4368 1536
WIRE -4368 1568 -4448 1568
WIRE -2928 1568 -2928 1536
WIRE -2928 1568 -3008 1568
WIRE -992 1568 -992 1536
WIRE -992 1568 -1072 1568
WIRE -4368 1584 -4368 1568
WIRE -2928 1584 -2928 1568
WIRE -992 1584 -992 1568
WIRE -1536 1632 -1536 1552
WIRE -1488 1632 -1536 1632
WIRE -2128 1648 -2128 1584
WIRE -2080 1648 -2128 1648
WIRE -5376 1680 -5376 1616
WIRE -4928 1680 -4928 1552
WIRE -4880 1680 -4928 1680
WIRE -3488 1680 -3488 1552
WIRE -3440 1680 -3488 1680
WIRE -1536 1680 -1536 1632
WIRE -2128 1696 -2128 1648
WIRE -4928 1744 -4928 1680
WIRE -3488 1744 -3488 1680
WIRE -5008 1776 -5008 1568
WIRE -5008 1776 -5232 1776
WIRE -3568 1776 -3568 1568
WIRE -3568 1776 -3872 1776
WIRE -1536 1792 -1536 1760
WIRE -2128 1840 -2128 1776
WIRE -4928 1856 -4928 1824
WIRE -3488 1856 -3488 1824
WIRE -2624 2096 -2672 2096
WIRE -2672 2128 -2672 2096
WIRE -2624 2128 -2624 2096
WIRE -560 2240 -608 2240
WIRE -320 2240 -416 2240
WIRE -2160 2336 -2352 2336
WIRE -2016 2336 -2080 2336
WIRE -1856 2336 -1904 2336
WIRE -1648 2336 -1712 2336
WIRE -480 2352 -480 2304
WIRE -2672 2368 -2672 2208
WIRE -2016 2368 -2016 2336
WIRE -2720 2384 -2768 2384
WIRE -960 2384 -1024 2384
WIRE -2768 2400 -2768 2384
WIRE -1744 2400 -1744 2368
WIRE -1744 2400 -1824 2400
WIRE -1024 2400 -1024 2384
WIRE -1744 2416 -1744 2400
WIRE -1456 2416 -1520 2416
WIRE -1296 2416 -1456 2416
WIRE -1264 2416 -1296 2416
WIRE -1072 2416 -1120 2416
WIRE -960 2416 -960 2384
WIRE -896 2416 -960 2416
WIRE -688 2416 -752 2416
WIRE -608 2416 -608 2240
WIRE -608 2416 -688 2416
WIRE -320 2416 -608 2416
WIRE -2720 2432 -2768 2432
WIRE -1072 2464 -1088 2464
WIRE -2160 2496 -2288 2496
WIRE -2016 2496 -2016 2448
WIRE -2016 2496 -2080 2496
WIRE -1088 2496 -1088 2464
WIRE -1024 2496 -1024 2480
WIRE -1024 2496 -1088 2496
WIRE -2960 2528 -3056 2528
WIRE -2768 2528 -2768 2432
WIRE -2768 2528 -2816 2528
WIRE -2672 2528 -2672 2448
WIRE -2480 2528 -2672 2528
WIRE -2352 2528 -2352 2336
WIRE -2352 2528 -2480 2528
WIRE -2288 2528 -2288 2496
WIRE -1024 2528 -1024 2496
WIRE -1296 2544 -1296 2416
WIRE -1216 2544 -1296 2544
WIRE -1184 2544 -1184 2480
WIRE -1152 2544 -1184 2544
WIRE -320 2544 -608 2544
WIRE -2144 2576 -2144 2544
WIRE -816 2592 -816 2480
WIRE -608 2592 -608 2544
WIRE -2192 2608 -2320 2608
WIRE -2096 2608 -2096 2544
WIRE -2096 2608 -2192 2608
WIRE -1904 2608 -1904 2336
WIRE -1904 2608 -2096 2608
WIRE -1648 2608 -1648 2336
WIRE -688 2608 -688 2416
WIRE -656 2608 -688 2608
WIRE -2672 2624 -2672 2528
WIRE -1152 2624 -1152 2544
WIRE -2768 2640 -2768 2528
WIRE -2720 2640 -2768 2640
WIRE -1152 2640 -1152 2624
WIRE -1056 2640 -1152 2640
WIRE -656 2656 -688 2656
WIRE -2064 2672 -2128 2672
WIRE -1984 2672 -2064 2672
WIRE -1728 2672 -1840 2672
WIRE -1520 2672 -1520 2416
WIRE -1520 2672 -1584 2672
WIRE -2880 2688 -2880 2592
WIRE -2720 2688 -2768 2688
WIRE -688 2688 -688 2656
WIRE -608 2688 -608 2672
WIRE -608 2688 -688 2688
WIRE -3584 2704 -3888 2704
WIRE -3264 2704 -3296 2704
WIRE -3056 2704 -3056 2528
WIRE -3056 2704 -3104 2704
WIRE -1152 2704 -1152 2640
WIRE -2128 2720 -2128 2672
WIRE -816 2720 -816 2672
WIRE -608 2720 -608 2688
WIRE -3584 2752 -3616 2752
WIRE -2768 2752 -2768 2688
WIRE -1696 2784 -1744 2784
WIRE -1520 2784 -1616 2784
WIRE -2880 2800 -2880 2768
WIRE -1744 2816 -1744 2784
WIRE -2672 2832 -2672 2704
WIRE -1152 2832 -1152 2784
WIRE -2128 2848 -2128 2800
WIRE -3616 2896 -3616 2752
WIRE -2192 2912 -2192 2608
WIRE -2096 2912 -2192 2912
WIRE -1904 2912 -1904 2736
WIRE -1904 2912 -1936 2912
WIRE -2672 2944 -2672 2912
WIRE -3616 3008 -3616 2976
FLAG -320 2416 Speed
FLAG -816 2720 0
FLAG -1024 2528 0
FLAG -1152 2832 0
FLAG -1056 2640 Load
FLAG -608 2720 0
FLAG -320 2544 RPM
FLAG -3840 1504 Speed_command
FLAG -320 2240 Position
FLAG -480 2352 0
FLAG -4368 1584 0
FLAG -4928 1856 0
FLAG -4880 1680 Clk0
FLAG -4512 1264 Position_Error
FLAG -5376 1680 0
FLAG -5232 1776 Position
FLAG -5248 1504 Position_Command
FLAG -2880 2800 0
FLAG -2768 2752 0
FLAG -2768 2400 0
FLAG -2672 2944 0
FLAG -2624 2128 0
FLAG -2480 2528 PWM
FLAG -3616 3008 0
FLAG -3872 1776 Speed
FLAG -1840 1504 I_command
FLAG -2208 1264 0
FLAG -2128 1840 0
FLAG -992 1056 0
FLAG -992 1584 0
FLAG -2928 1088 0
FLAG -2928 1584 0
FLAG -3488 1856 0
FLAG -3440 1680 Clk1
FLAG -1536 1792 0
FLAG -1488 1632 Clk2
FLAG -1792 1024 current
FLAG -2256 1040 Clk1
FLAG -672 1008 Clk2
FLAG -1456 1248 0
FLAG -3072 1264 Speed_Error
FLAG -1072 1264 Current_Error
FLAG -1440 1360 I_sampled
FLAG -240 1504 PWM_Value
FLAG -2560 1504 P_signal
FLAG -3328 928 P_signal
FLAG -2080 1360 Max_Limit
FLAG -3312 832 Max_Limit
FLAG -2080 1648 Min_Limit
FLAG -2896 1200 Min_Limit
FLAG -3888 2704 PWM_Value
FLAG -1456 2416 Torque
FLAG -2128 2848 0
FLAG -1744 2416 0
FLAG -2144 2576 0
FLAG -2064 2672 Tem
FLAG -2288 2528 0
FLAG -2320 2608 Speed
FLAG -1520 2784 current
FLAG -1744 2816 0
SYMBOL Subtractor -1184 2416 R0
SYMATTR InstName X17
SYMBOL Integrator -816 2416 R0
SYMATTR InstName X18
SYMBOL e -1024 2384 R0
WINDOW 3 -98 -23 Left 2
SYMATTR Value {1/(Jmotor + Jload)}
SYMATTR InstName E7
SYMBOL voltage -1152 2688 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V12
SYMATTR Value PWL(0 0 0.04999999 0 0.05 0.0)
SYMBOL voltage -816 2576 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V13
SYMATTR Value 0
SYMBOL Jumper -1184 2560 M0
SYMATTR InstName X19
SYMBOL e -608 2576 R0
SYMATTR InstName E8
SYMATTR Value {30 / pi}
SYMBOL Integrator -480 2240 R0
SYMATTR InstName X13
SYMBOL Subtractor -5008 1504 R0
SYMATTR InstName X14
SYMBOL Gain -4432 1472 R0
WINDOW 3 -36 -57 Left 2
SYMATTR Value {P_pos}
SYMATTR InstName E2
SYMBOL voltage -4928 1728 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 46 70 Left 2
SYMATTR Value PULSE(-1 1 0 0 0 {T_aperture} {1/Fs_pos} 100000)
SYMATTR InstName V19
SYMBOL S&H -4752 1504 R0
SYMATTR InstName X31
SYMBOL voltage -5376 1520 R0
WINDOW 3 -188 200 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PWL(0 0 0.00499999 0 0.005 {0.2*pi})
SYMATTR InstName V14
SYMBOL Subtractor -2880 2528 R0
SYMATTR InstName X21
SYMBOL voltage -2880 2672 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -374 206 Left 1
SYMATTR Value PULSE({-V_drive} {V_drive} 20uS {p/2} {p/2} 0 {p} 100000)
SYMATTR InstName V20
SYMBOL sw -2672 2352 R0
WINDOW 3 13 103 Left 2
SYMATTR Value VCS
SYMATTR InstName S3
SYMBOL sw -2672 2608 R0
WINDOW 3 13 103 Left 2
SYMATTR Value VCS
SYMATTR InstName S4
SYMBOL voltage -2672 2224 R180
WINDOW 0 24 104 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V21
SYMATTR Value {V_drive}
SYMBOL voltage -2672 2928 R180
WINDOW 0 24 104 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V22
SYMATTR Value {V_drive}
SYMBOL S&H -3440 2704 R0
SYMATTR InstName X24
SYMBOL voltage -3616 2880 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 29 103 Left 2
SYMATTR Value PULSE(-1 1 {20uS + p - T_aperture/2} 0 0 {T_aperture} {p} 100000)
SYMATTR InstName V23
SYMBOL Quantize -3184 2704 R0
WINDOW 39 -91 106 Left 2
SYMATTR SpiceLine Range=50, levels=760
SYMATTR InstName X25
SYMBOL Clamp1 -4208 1504 R0
WINDOW 39 -80 90 Left 2
SYMATTR SpiceLine max={Speed_limit}, min={-Speed_limit}
SYMATTR InstName X15
SYMBOL Subtractor -1632 1504 M180
SYMATTR InstName X16
SYMBOL Adder -736 1504 M180
SYMATTR InstName X29
SYMBOL Subtractor -3568 1504 R0
SYMATTR InstName X32
SYMBOL voltage -2128 1680 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value {-I_limit}
SYMBOL Clamp -2128 1504 R0
SYMATTR InstName X33
SYMBOL Gain -1056 944 R0
WINDOW 3 -60 -46 Left 2
SYMATTR Value {I_current/Fs_current}
SYMATTR InstName E4
SYMBOL Gain -1056 1472 R0
WINDOW 3 -34 -45 Left 2
SYMATTR Value {P_current}
SYMATTR InstName E9
SYMBOL Adder -2320 1504 M180
SYMATTR InstName X34
SYMBOL Gain -2992 976 R0
WINDOW 3 -74 -46 Left 2
SYMATTR Value {I_speed/Fs_speed}
SYMATTR InstName E10
SYMBOL Gain -2992 1472 R0
WINDOW 3 -36 -57 Left 2
SYMATTR Value {P_speed}
SYMATTR InstName E13
SYMBOL Subtractor -3184 832 R0
SYMATTR InstName X35
SYMBOL Subtractor -2736 1200 R0
SYMATTR InstName X36
SYMBOL voltage -1536 1664 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 49 101 Left 2
SYMATTR Value PULSE(-1 1 10uS 0 0 {T_aperture} {1/Fs_current} 100000)
SYMATTR InstName V6
SYMBOL Delay -2144 1008 R0
SYMATTR InstName X37
SYMBOL Adder -2608 1008 M180
SYMATTR InstName X38
SYMBOL S&H -3312 1504 R0
SYMATTR InstName X39
SYMBOL Clamp -2432 1008 R0
SYMATTR InstName X40
SYMBOL Delay -512 976 R0
SYMATTR InstName X41
SYMBOL Adder -848 976 M180
SYMATTR InstName X42
SYMBOL S&H -1328 1504 R0
SYMATTR InstName X43
SYMBOL ADC -1488 1024 R0
WINDOW 39 -73 -72 Left 2
SYMATTR SpiceLine Range={2.2*I_limit}, bits=10
SYMATTR InstName X44
SYMBOL Clamp1 -560 1504 R0
WINDOW 39 -49 85 Left 2
SYMATTR SpiceLine max=25, min=-25
SYMATTR InstName X45
SYMBOL Clamp1 -2784 832 R0
WINDOW 39 -49 85 Left 2
SYMATTR SpiceLine max=1e8, min=0
SYMATTR InstName X46
SYMBOL Clamp1 -2560 1200 R0
WINDOW 39 -49 85 Left 2
SYMATTR SpiceLine max=0, min=-1e8
SYMATTR InstName X47
SYMBOL voltage -2128 1328 R180
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -123 99 Left 2
SYMATTR Value {I_limit}
SYMATTR InstName V8
SYMBOL voltage -3488 1728 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 49 92 Left 2
SYMATTR Value PULSE(-1 1 {2*T_aperture} 0 0 {T_aperture} {1/Fs_speed} 100000)
SYMATTR InstName V5
SYMBOL res -2032 2352 R0
SYMATTR InstName R1
SYMATTR Value {Rt}
SYMBOL ind -2176 2352 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value {L}
SYMBOL bv -2128 2704 R0
WINDOW 3 44 57 Left 2
SYMATTR Value V=I(L1)*Kt
SYMATTR InstName B1
SYMBOL e -2064 2496 M270
SYMATTR InstName E1
SYMATTR Value {Kemf}
SYMBOL Subtractor -1904 2672 R0
SYMATTR InstName X1
SYMBOL Subtractor -1648 2672 M180
SYMATTR InstName X2
SYMBOL Clamp1 -2016 2912 R0
WINDOW 39 -93 83 Left 2
SYMATTR SpiceLine max={Kf}, min={-Kf}
SYMATTR InstName X3
SYMBOL Gain -1808 2304 R0
WINDOW 3 -15 32 Left 2
SYMATTR Value {Kd}
SYMATTR InstName E3
SYMBOL bv -1600 2784 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName B2
SYMATTR Value V=I(L1)
SYMBOL voltage -1456 1120 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -419 174 Invisible 2
SYMATTR Value PULSE(-1 1 {20uS + p/2 - T_aperture} 0 0 {T_aperture} {p} 100000)
SYMATTR InstName V1
TEXT -2872 592 Left 2 ;D C   M O T O R   S E R V O   C O N T R O L L E R
TEXT -1216 1944 Left 2 ;LOAD
TEXT -336 2448 Left 2 ;Radians/sec
TEXT -1240 2568 Left 2 ;lock\nrotor
TEXT -1136 2568 Left 2 ;load\ntorque
TEXT -3912 1528 Left 2 ;Radians/sec
TEXT -5096 720 Left 2 ;POSITION REGULATOR
TEXT -320 2272 Left 2 ;Radians
TEXT -3624 1944 Left 2 ;MODULATION
TEXT -3040 2768 Left 2 ;PWM Carrier
TEXT -3544 2616 Left 2 ;PWM Module Reload
TEXT -3648 720 Left 2 ;SPEED REGULATOR
TEXT -1712 728 Left 2 ;CURRENT REGULATOR
TEXT -1408 1176 Left 2 ;ADC Trigger
TEXT -1160 792 Left 2 ;INTEGRATOR
TEXT -2248 2192 Left 2 ;Motor Model (Pittman DC Servo Motor\nModel 14206 with 24V Winding)
TEXT -1896 2872 Left 2 ;Friction\nMotor Bearings and Brushes
TEXT -1624 2376 VRight 2 ;Damping Losses
TEXT -1064 2928 Left 2 ;To put motor on a dyno, set jumper to "lock rotor"\nand then use the "Speed Override" voltage source\nto specify dyno speed.
TEXT -992 2568 Left 2 ;Speed Override
TEXT -5912 2304 Left 2 !.tran 0 0.05 0 uic
TEXT -5920 2648 Left 2 !.param Jload = 1E-12
TEXT -5920 2808 Left 2 !.param I_limit = 25
TEXT -5920 3064 Left 2 !.param I_current = 2000
TEXT -5920 3032 Left 2 !.param P_current = 20
TEXT -5920 3000 Left 2 !.param I_speed = 1500
TEXT -5920 2968 Left 2 !.param P_speed  = 3
TEXT -5920 3128 Left 2 !.param Fs_speed = 10E3
TEXT -5920 3160 Left 2 !.param Fs_current = 20E3
TEXT -5920 3416 Left 2 !.model VCS SW(Ron=0.00001 Roff=1T Vt=0)
TEXT -5920 2424 Left 2 !.param Kt = 0.0137
TEXT -5920 2616 Left 2 !.param Jmotor = 4.05E-6
TEXT -5920 2456 Left 2 !.param Kemf = 0.0137
TEXT -5920 2488 Left 2 !.param Kf = 3.0E-6
TEXT -5920 2520 Left 2 !.param Kd = 10E-6
TEXT -5920 2552 Left 2 !.param Rt = 0.102
TEXT -5920 2584 Left 2 !.param L = 0.075E-3
TEXT -5920 3096 Left 2 !.param Fs_pos = 10E3
TEXT -5920 2872 Left 2 !.param P_pos = 160
TEXT -5920 2776 Left 2 !.param Speed_limit = {speed_limit_RPM*2*pi/60}
TEXT -5912 2336 Left 2 !.options method = gear
TEXT -5920 3352 Left 2 !.param T_aperture = {p/200}
TEXT -5920 3320 Left 2 !.param p = {1 / PWM_freq}
TEXT -5600 2648 Left 2 ;Load Inertia (Kilograms-Meter^2)
TEXT -5600 2424 Left 2 ;Torque Constant (Newton-Meters/Amp)
TEXT -5600 2456 Left 2 ;Voltage Constant (Volts/(radian/sec))
TEXT -5600 2488 Left 2 ;Coulomb Friction / Hysteresis Drag Torque (Newton-Meters)
TEXT -5600 2520 Left 2 ;Viscous Damping Factor (Newton-Meters/(radian/sec))
TEXT -5600 2616 Left 2 ;Rotor Inertia (Kilograms-Meter^2)
TEXT -5600 2584 Left 2 ;Terminal Inductance (Henries)
TEXT -5600 2552 Left 2 ;Terminal Resistance (Ohms)
TEXT -5400 3416 Left 2 ;Settings for VCS (Voltage Controlled Switch) model
TEXT -5328 2808 Left 2 ;Current Limit (Amp)
TEXT -5600 3160 Left 2 ;Sampling Frequency for current loop (Hz)
TEXT -5600 3128 Left 2 ;Sampling Frequency for speed loop (Hz)
TEXT -5600 2328 Left 2 ;Numerical integration method, either trapezoidal or Gear
TEXT -5600 2968 Left 2 ;Speed loop proportional gain (P of PID)
TEXT -5600 3032 Left 2 ;Current loop proportional gain (P of PID)
TEXT -5600 3000 Left 2 ;Speed loop integral gain (I of PID)
TEXT -5600 3064 Left 2 ;Current loop integral gain (I of PID)
TEXT -5912 2232 Left 2 ;Simulating Ultramotion Actuator - NOT WORKING YET
TEXT -5552 3320 Left 2 ;PWM Period (seconds)
TEXT -5552 3352 Left 2 ;PWM Time ON (seconds)
TEXT -5920 3288 Left 2 !.param PWM_freq = 20E3
TEXT -5600 2296 Left 2 ;Stop time
TEXT -5600 3096 Left 2 ;Sampling Frequency for position loop (Hz)
TEXT -5552 3288 Left 2 ;Switching Frequency (Hz)
TEXT -5328 2776 Left 2 ;Speed limit (rad/s)
TEXT -5328 2872 Left 2 ;Position target (rad)
TEXT -5920 2744 Left 2 !.param speed_limit_RPM = 19000
TEXT -5328 2744 Left 2 ;Speed limit (RPM)
TEXT -5920 2696 Left 2 !.param V_drive = 28
TEXT -5600 2696 Left 2 ;Voltage Drive (V)
RECTANGLE Normal -368 3104 -1248 1904
RECTANGLE Normal -4000 1888 -5120 688
RECTANGLE Normal -2528 3088 -3680 1896
RECTANGLE Normal -288 1872 -1744 688
RECTANGLE Normal -1936 1872 -3680 688
RECTANGLE Normal -320 1104 -1184 752
RECTANGLE Normal -1552 3024 -2264 2160
