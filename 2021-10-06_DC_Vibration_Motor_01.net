* C:\GitHub\LTspice-simulations\2021-10-06_DC_Vibration_Motor_01.asc
V_drive 1 0 PWL(0MS 0 50MS 0 50.1MS {drive_voltage} 150MS {drive_voltage} 150.1MS 0)
L_Motor 1 2 {L_motor}
R_Motor 2 3 {R_motor}
VSENSE1 4 0 0 Rser=0
L_inertia1 N003 7 {L_inertia_emass} Rser=0 Rpar=0
R_loss 7 8 {R_loss}
VSENSE2 8 0 0 Rser=0
C1 11 0 1 Rser=0 Lser=0 Rpar=0 Cpar=0
R1 11 0 1
B1 N004 0 V=.00001*I(VSENSE2)*I(VSENSE2)*sin(V(11)*57.329)
Back_emf 3 4 V=I(VSENSE2)*K_emf
B§V_torque 6 0 V=I(VSENSE1)*K_t
B§V_gravity 6 N001 V=L_inertia_emass*radius*sin(V(6))*9.81
L_inertia N002 N003 {L_inertia_rotor} Rser=0 Rpar=0
B§V_load_torque N001 N002 V=0
B3 0 11 I=I(VSENSE2)
* structure from http://www.ecircuitcenter.com/Circuits/dc_motor_model/DCmotor_model.htm\nvalues from https://www.precisionmicrodrives.com/content/ab-025-using-spice-to-model-dc-motors/\n(resistance values for inductors matter)
* Electrical Components
* Mechanical Components
.tran 0 200MS 0
* Load Polar Mass Moment of Inertia\nN m / (rad/s2) or kg m2 / rad
* Friction and Losses\nN m / (rad/s)
* Torque Constant\nN m / A
* Terminal Resistance\n(Ohm)
* Terminal Inductance\n(H)
* Speed Constant\n(V/rad/s)
* DC Motor Model\nwith Eccentric Mass
* Motor Voltage (V)
* I(VSENSE1) = Motor Current\n(A)
* Back emf voltage (V)
* Motor Torque (N m)
.param R_motor = 5.5
.param L_motor = 50u
.param K_t=900u
.param R_loss = 300n
.param K_emf = 900u
.param L_inertia_emass = 15n
.param L_inertia_rotor = 15n
.param radius = 0.002m
.param drive_voltage = 3
* Motor Terminal Resistance (Ohms)\nMotor Terminal Inductance (H) \nTorque Constant (N m / A)\nPolar Mass Moment of Inertia, Motor Rotor (kg m2 / rad)\nFriction and Losses (N m / rad/s)\nSpeed Constant (V/rad/s) \n \nDrive Voltage (V)
* Edit These
* I(VSENSE2) = Angular Velocity\n(rad/s)
* Velocity to Position
* Shaft angular position (rad)
* Velocity to Position
* Rotor Polar Mass Moment of Inertia\nN m / (rad/s2) or kg m2 / rad
.model turnoff SW(Vt = 1u Ron = 0.000001p)
.model turn_on D( Vfwd = 0.6 Rrev = 0.0001 Ron = 0.000001)
.backanno
.end
